<!-- This file is autogenerated by running ./script/test -->
# Included files

* [../xhtml/modules/datatypes.rng](../textbook-html/../xhtml/modules/datatypes.rng)
* [../xhtml/modules/attribs.rng](../textbook-html/../xhtml/modules/attribs.rng)
* [../xhtml/modules/struct.rng](../textbook-html/../xhtml/modules/struct.rng)
* [../xhtml/modules/text.rng](../textbook-html/../xhtml/modules/text.rng)
* [../xhtml/modules/hypertext.rng](../textbook-html/../xhtml/modules/hypertext.rng)
* [../xhtml/modules/list.rng](../textbook-html/../xhtml/modules/list.rng)
* [../xhtml/modules/image.rng](../textbook-html/../xhtml/modules/image.rng)
* [../xhtml/modules/param.rng](../textbook-html/../xhtml/modules/param.rng)
* [../xhtml/modules/meta.rng](../textbook-html/../xhtml/modules/meta.rng)
* [../xhtml/modules/link.rng](../textbook-html/../xhtml/modules/link.rng)
* [../xhtml/modules/base.rng](../textbook-html/../xhtml/modules/base.rng)
* [../xhtml/modules/iframe.rng](../textbook-html/../xhtml/modules/iframe.rng)
* [../xhtml/modules/table.rng](../textbook-html/../xhtml/modules/table.rng)
* [../xhtml/modules/pres.rng](../textbook-html/../xhtml/modules/pres.rng)
* [../xhtml/modules/target.rng](../textbook-html/../xhtml/modules/target.rng)
* [../mathml2.rng](../textbook-html/../mathml2.rng)

# File Overview

This file is organized into the following sections:

1.  Textbook-specific Blockish "elements": This contains things like
    Note, Exercise
2.  Textbook-specific Inline "elements": things like "term", inline
    list, media
3.  Enum attributes: things like `bullet-style` or `lower-roman`
4.  HTML5 elements: things like `<section>` or `<figure>`
5.  Additional attributes to existing xhtml elements: things like table
    valign and `<caption>` element
6.  Additional datatype values: things like UUID, UUID-and-version

A note about `*.model` references. XHTML has 3 types of models,
`Block.model`, `Inline.model`, and `Flow.model`. Each element may have
one of these types as children. For example, `<div>` can have other
Block elements **or** Inline elements as children so it is marked as
having a `Flow.model`

A note about `*.class` definitions. This definition describes the
attributes and children *without* describing the element. It is read as
"the class of things that are an X"

## Block.class

This extends the set of elements that are allowed in a `Block.class`

One of the following:

* [Content.Section](#contentsection)
* [Content.Note](#contentnote)
* [Content.Equation](#contentequation)
* [Content.Exercise](#contentexercise)
* [Content.Example](#contentexample)
* [Content.DivList](#contentdivlist)
* [Content.ListWithTitle](#contentlistwithtitle)
* [Content.ParaWithTitle](#contentparawithtitle)
* `<div>`[Content.Media.class](#contentmediaclass)`</div>`
* `<div>`[Content.Alternates.class](#contentalternatesclass)`</div>`
* `<div>`[Content.Newline.class](#contentnewlineclass)`</div>`
* [figure](#figure)
* [cnx-pi](#cnx-pi)

## Inline.class

This extends the set of elements that are allowed in a `Inline.class`

One of the following:

* **math**
* [u](#u)
* [Content.SpanList](#contentspanlist)
* [Content.Space](#contentspace)
* [Content.FootnoteNumber](#contentfootnotenumber)
* [Content.Term](#contentterm)
* [Content.Foreign](#contentforeign)
* [Content.CiteTitle](#contentcitetitle)
* `<span>`[Content.Media.class](#contentmediaclass)`</span>`
* `<span>`[Content.Alternates.class](#contentalternatesclass)`</span>`
* `<span>`[Content.Newline.class](#contentnewlineclass)`</span>`

# Textbook-specific Blockish "elements"

## Content.BlockishBase.class

This defines the set of attributes and child elements that are common to
many Blockish elements

[Content.BlockishBase.attrs](#contentblockishbaseattrs)[Content.BlockishBase.Title](#contentblockishbasetitle)`?`
## Content.BlockishBase.Title

This is a (usually) optional title for some of the Blockish elements
like a Note, Exercise, or Example

`<div data-type="title">`

1.  **Common.attrib**
2.  **Flow.model**

`</div>`

## Content.BlockishBase.attrs

This defines a set of attributes:

* ` data-label=`[Text.datatype](#textdatatype)`?`
* ` data-has-label="true"?`
* ` data-element-type=`[Text.datatype](#textdatatype)`?`

And other things:

1.  These are attributes common to many blockish elements

2.  **Common.attrib**

## Content.Section

This describes a section with an optional title

`<section data-depth=`[Number.datatype](#numberdatatype)`
data-label=`[Text.datatype](#textdatatype)`?
data-element-type=`[Text.datatype](#textdatatype)`?>`

1.  **Common.attrib**
2.  [Content.Section.Title](#contentsectiontitle)`?`
3.  **Flow.model**

`</section>`

## Content.Section.Title

One of the following:

* `<h3>`[Content.Section.Title.class](#contentsectiontitleclass)`</h3>`
* `<h4>`[Content.Section.Title.class](#contentsectiontitleclass)`</h4>`
* `<h5>`[Content.Section.Title.class](#contentsectiontitleclass)`</h5>`
* `<h6>`[Content.Section.Title.class](#contentsectiontitleclass)`</h6>`

## Content.Section.Title.class

This defines a set of attributes:

* ` data-type="title"`

And other things:

1.  **id.attrib**
2.  **Inline.model**

## Content.Note

`<div data-type="note">`

1.  [Content.BlockishBase.class](#contentblockishbaseclass)
2.  **Flow.model**

`</div>`

## Content.Equation

`<div data-type="equation">`

1.  [Content.BlockishBase.class](#contentblockishbaseclass)
2.  **Flow.model**

`</div>`

## Content.Problem

`<div data-type="problem">`

1.  [Content.BlockishBase.class](#contentblockishbaseclass)
2.  **Flow.model**

`</div>`

## Content.Solution

`<div data-type="solution" data-print-placement=`[`"here"` |
`"end"`]`?>`

1.  [Content.BlockishBase.class](#contentblockishbaseclass)
2.  **Flow.model**

`</div>`

## Content.Commentary

`<div data-type="commentary">`

1.  [Content.BlockishBase.class](#contentblockishbaseclass)
2.  **Flow.model**

`</div>`

## Content.Exercise

`<div data-type="exercise" data-print-placement=`[`"here"` |
`"end"`]`?>`

1.  [Content.BlockishBase.class](#contentblockishbaseclass)
2.  [Content.Problem](#contentproblem)
3.  [Content.Solution](#contentsolution)`*`
4.  [Content.Commentary](#contentcommentary)`*`

`</div>`

## Content.Example

`<div data-type="example">`

1.  [Content.BlockishBase.class](#contentblockishbaseclass)
2.  **Flow.model**

`</div>`

## Content.Newline.class

This defines a set of attributes:

* ` data-type="newline"`
* ` data-count=`[Number.datatype](#numberdatatype)`?`

And other things:

1.  [Content.BlockishBase.attrs](#contentblockishbaseattrs)
2.  **br**`*`

# Lists

Lists can come in many forms. Simple lists use the existing `<ol>` and
`<ul>` elements but there are cases when this is not enough:

* Lists with a title
* Lists with a mark-prefix for each item
* Inline lists

In these cases the list is marked up with a `<div data-type="list">` or
`<span data-type="list">`

**TODO: Use `role="list"` instead of `data-type="list"` for free
accessibility**

## Content.DivList

`<div>`

1.  [div-span-list.attrs](#div-span-listattrs)
2.  [Content.BlockishBase.class](#contentblockishbaseclass)
3.  [Content.DivListItem](#contentdivlistitem)`+`

`</div>`

## Content.DivListItem

`<div data-type="item">`

1.  [Content.BlockishBase.attrs](#contentblockishbaseattrs)
2.  **Flow.model**

`</div>`

## Content.SpanList

`<span>`

1.  [div-span-list.attrs](#div-span-listattrs)
2.  [Content.BlockishBase.class](#contentblockishbaseclass)
3.  [Content.SpanListItem](#contentspanlistitem)`+`

`</span>`

## Content.SpanListItem

`<span data-type="item">`

1.  [Content.BlockishBase.attrs](#contentblockishbaseattrs)
2.  **Inline.model**

`</span>`

## Content.ListWithTitle

`<div data-type="list-with-title">`

1.  [id.attrib.required](#idattribrequired)
2.  `<div data-type="title">`
    
    1.  **id.attrib**
    2.  **Inline.model**
    
    `</div>`

3.  `[`**ul**` | `**ol**` | `[Content.DivList](#contentdivlist)`]`

`</div>`

## Content.ParaWithTitle

`<p>`

1.  **p.attlist**
2.  [Content.InlineTitle](#contentinlinetitle)
3.  **Inline.model**

`</p>`

## Content.Alternates.class

This defines a set of attributes:

* ` data-type="alternates"`
* ` data-alt=`[Text.datatype](#textdatatype)`?`

And other things:

1.  [id.attrib.required](#idattribrequired)
2.  `[`**img**` |
    `[Content.ImageWithThumbnail](#contentimagewiththumbnail)`]+`

## Content.Media.class

This defines a set of attributes:

* ` data-type="media"`
* ` data-alt=`[Text.datatype](#textdatatype)
* ` data-longdesc=`[Text.datatype](#textdatatype)`?`

And other things:

1.  [id.attrib.required](#idattribrequired)
2.  `[`**img**` | `**iframe**`]`

# Textbook-specific Inline "elements"

## Content.Space

This provides horizontal space

`<span data-type="space"
data-count=`[Number.datatype](#numberdatatype)`>`**Text.datatype**`</span>`
## Content.Term

This defines a Term that will be bold and show up in the Book Index

`<span data-type="term">`

1.  **id.attrib**
2.  **class.attrib**
3.  **Inline.model**

`</span>`

## Content.Foreign

This defines a piece of Foreign text

`<span data-type="foreign">`**Inline.model**`</span>`
## Content.FootnoteNumber

This defines Footnote number that appears in the content. It is matched
with an item in Structure.Page.FootnoteRefs

`<sup data-type="footnote-number">`

1.  [id.attrib.required](#idattribrequired)
2.  `<a data-type="footnote-link"
    href=`[URI.datatype](#uridatatype)`>`**Number.datatype**`</a>`

`</sup>`

## Content.ImageWithThumbnail

This is an Image with a clickable thumbnail

`<a data-type="image-with-thumbnail"
href=`[URI.datatype](#uridatatype)`>`**img**`</a>`
## Content.CiteTitle

`<span data-type="cite-title">`**Inline.model**`</span>`
## Content.InlineTitle

`<span data-type="title">`**Inline.model**`</span>`
# Enum attributes (mostly Tables and Lists)

## id.attrib.required

This defines a set of attributes:

* ` id=`[ID.datatype](#iddatatype)

And other things:

1.  This markes that the `id` attribute on an element is **required**

^

## table.attlist

This defines a set of attributes:

* ` data-label=`[Text.datatype](#textdatatype)`?`
* ` data-frame=`[Text.datatype](#textdatatype)`?`
* ` data-colsep=`[Number.datatype](#numberdatatype)`?`
* ` data-rowsep=`[Number.datatype](#numberdatatype)`?`

And other things:

1.  These are additional attributes that are defined in CALS tables

^

## caption

This extends the set of elements that are allowed in a `caption`

allow an optional title for the caption

`<caption>`

1.  **caption.attlist**
2.  [Content.InlineTitle](#contentinlinetitle)
3.  **Inline.model**

`</caption>`

## enum.attr.td.data-valign

One of the following:

* `"top"`
* `"middle"`
* `"bottom"`

## enum.attr.td.data-align

One of the following:

* `"left"`
* `"center"`
* `"right"`
* `"justify"`
* `"char"`

## td.attlist

This defines a set of attributes:

* ` data-valign=`[enum.attr.td.data-valign](#enumattrtddata-valign)`?`
* ` data-align=`[enum.attr.td.data-align](#enumattrtddata-align)`?`

## th.attlist

This defines a set of attributes:

* ` data-valign=`[enum.attr.td.data-valign](#enumattrtddata-valign)`?`
* ` data-align=`[enum.attr.td.data-align](#enumattrtddata-align)`?`

## enum.attr.ol.data-number-style

One of the following:

* `"arabic"`
* `"lower-alpha"`
* `"upper-alpha"`
* `"lower-roman"`
* `"upper-roman"`

## enum.attr.ol.data-mark-suffix

(text...)
## ol.attlist

This defines a set of attributes:

* `
  data-number-style=`[enum.attr.ol.data-number-style](#enumattroldata-number-style)`?`
* `
  data-mark-suffix=`[enum.attr.ol.data-mark-suffix](#enumattroldata-mark-suffix)`?`
* `
  data-mark-prefix=`[enum.attr.ol.data-mark-suffix](#enumattroldata-mark-suffix)`?`

## enum.attr.ul.data-bullet-style

One of the following:

* `"bullet"`
* `"open-circle"`
* `"pilcrow"`
* `"rpilcrow"`
* `"asterisk"`
* `"dash"`
* `"section"`
* `"none"`

## ul.attlist

This defines a set of attributes:

* `
  data-bullet-style=`[enum.attr.ul.data-bullet-style](#enumattruldata-bullet-style)`?`
* `
  data-mark-suffix=`[enum.attr.ol.data-mark-suffix](#enumattroldata-mark-suffix)`?`
* ` data-labeled-item="true"?`

## enum.attr.img.data-media-type

One of the following:

* `"image/png"`
* `"image/jpeg"`
* `"application/postscript"`

## img.attlist

This defines a set of attributes:

* `
  data-media-type=`[enum.attr.img.data-media-type](#enumattrimgdata-media-type)`?`
* ` data-longdesc=`[URI.datatype](#uridatatype)`?`
* ` data-print-width=`[Length.datatype](#lengthdatatype)`?`
* ` data-print=`[Boolean.datatype](#booleandatatype)`?`

## em.attlist

This defines a set of attributes:

* ` data-effect="smallcaps"?`

## div-span-list.attrs

This defines a set of attributes:

* ` data-type="list"`
* ` data-mark-suffix=`[Text.datatype](#textdatatype)`?`
* ` data-item-sep=`[Text.datatype](#textdatatype)`?`

And other things:

1.  One of the following:
    
    * 1.  ` data-list-type=`[`"bulleted"` | `"labeled-item"`]
      2.  `
          data-bullet-style=`[enum.attr.ul.data-bullet-style](#enumattruldata-bullet-style)`?`
    
    * 1.  ` data-list-type="enumerated"`
      2.  `
          data-number-style=`[enum.attr.ol.data-number-style](#enumattroldata-number-style)`?`

# HTML5 elements

These are elements that were not defined in the original XHTML spec but
do appear in XHTML5 that openstax uses.

## ol.attlist

This defines a set of attributes:

* ` type=?`
* ` compact="compact"?`
* ` start=?`

And other things:

1.  From `xhtml/legacy.rng` **TODO:** Move this into a separate legacy
    file

^

## li.attlist

This defines a set of attributes:

* ` data-label=`[Text.datatype](#textdatatype)`?`

## u

For strikethrough. from `xhtml/legacy.rng` . **TODO:** Mark this up
differently and move this into a separate legacy file

`<u>`

1.  [u.attlist](#uattlist)
2.  **Inline.model**

`</u>`

## u.attlist

**Common.attrib**
## figure

`<figure>`

1.  [figure.attlist](#figureattlist)
2.  [Content.BlockishBase.Title](#contentblockishbasetitle)`?`
3.  [figcaption](#figcaption)`?`
4.  **Flow.model**

`</figure>`

## figure.attlist

This defines a set of attributes:

* ` data-label=`[Text.datatype](#textdatatype)`?`
* ` data-orient=`[`"vertical"` | `"horizontal"`]`?`

And other things:

1.  **Common.attrib**

## figcaption

`<figcaption>`

1.  [figcaption.attlist](#figcaptionattlist)
2.  [Content.InlineTitle](#contentinlinetitle)`?`
3.  **Flow.model**

`</figcaption>`

## figcaption.attlist

**id.attrib**
## cnx-pi

`<cnx-pi>`

1.  [cnx-pi.attlist](#cnx-piattlist)
2.  [cnx-pi.datatype](#cnx-pidatatype)

`</cnx-pi>`

## cnx-pi.attlist

This defines a set of attributes:

* ` data-type=`[`"cnx.eoc"` | **Text.datatype**]

# Datatypes

These are specific text values that can be validated by regular
expressions or by looking up in a database

For more details on these formats, see [CNX API Documentation][1]. This
link may become outdated but is current at the time of writing

## cnx-pi.datatype

This is usually found in an Introduction Page and describes how sections
should collate at the end of a Bhapter/Book. It is being deprecated in
favor of CSS recipes instead

Example (in CNXML):

    
    <?chapter-toc label="Learning Objectives"?>
    <?cnx.eoc class="section-summary" title="Section Summary"?>
    <?cnx.eoc class="section-quiz" title="Section Quiz"?>
    <?cnx.eoc class="short-answer" title="Short Answer"?>
    <?cnx.eoc class="further-research" title="Further Research"?>
    <?cnx.eoc class="references" title="References"?>

is converted to:

    
    <cnx-pi data-type="chapter-toc">label="Learning Objectives"?</cnx-pi>
    <cnx-pi data-type="cnx.eoc">class="section-summary" title="Section Summary"?</cnx-pi>
    <cnx-pi data-type="cnx.eoc">class="section-quiz" title="Section Quiz"?</cnx-pi>
    <cnx-pi data-type="cnx.eoc">class="short-answer" title="Short Answer"?</cnx-pi>
    <cnx-pi data-type="cnx.eoc">class="further-research" title="Further Research"?</cnx-pi>
    <cnx-pi data-type="cnx.eoc">class="references" title="References"?</cnx-pi>

(text...)
## TODO.enum.datatype

This is a placeholder for enumerated strings that have not been defined
in this grammar yet

(text...)
## UUID-and-version.datatype

This is an identifier that conforms to the UUIDv4 format specification.
It is created either by the author or automatically by the archive when
publishing a new Book or Page.

This contains a UUID and a version. Example:
`bcfb5800-b883-4a63-8599-e098b407ddfc@9.1`

Regular Expression for validation:
`/[a-f0-9]{8}-[a-f0-9]{4}-4[a-f0-9]{3}-[89aAbB][a-f0-9]{3}-[a-f0-9]{12}@[0-9]+(\.[0-9]+)?/`

(text...)
## Sha.datatype

These are used for identifying resources (e.g. images) and the value is
an `sha1` hash, as provided by `sha1sum` of the resource file bits.

(text...)
## ShortId.datatype

This is a computed string which is based on the first few bits of the
UUID. These are not guaranteed to be stable over all time, but we will
strive to extend, rather than replace them.

Example: `vPtYALiD@9`

(text...)
## UserLogin.datatype

(text...)
## UserName.datatype

(text...)
## Boolean.datatype

One of the following:

* `"true"`
* `"false"`

## Subject.datatype

These values are used to organize content on the [Browse][2] page

One of the following:

* `"Mathematics and Statistics"`
* (text...)





[1]: https://github.com/openstax/napkin-notes/pull/73
[2]: https://cnx.org/browse
